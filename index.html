<!DOCTYPE html>
<html>
<head>
    <title>Battery Flap</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            text-align: center;
            font-family: Arial, sans-serif;
            background: #000;
            color: white;
        }

        canvas {
            display: block;
            margin: 10px auto;
            border: 3px solid white;
        }

        h2 {
            margin-top: 10px;
        }
    </style>
</head>
<body>

<h2>ðŸ”‹NENY Battery Jump!</h2>
<p>Press SPACE to Flap</p>
    <p>Don't hit the pipes!</p>

<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let background = new Image();
background.src = "background.jpg"; // Make sure file exists

let bird;
let pipes;
let score;
let gameOver;
let gameStarted;

function resetGame() {
    bird = {
        x: 80,
        y: 300,
        width: 25,
        height: 40,
        gravity: 0.5,   // Easier
        lift: -9,
        velocity: 0
    };

    pipes = [];
    score = 0;
    gameOver = false;
    gameStarted = false;
}

resetGame();

function createPipe() {
    const gap = 180; // Larger gap = easier
    const topHeight = Math.random() * 250 + 50;

    pipes.push({
        x: canvas.width,
        top: topHeight,
        bottom: canvas.height - topHeight - gap,
        width: 60
    });
}

function update() {
    if (!gameStarted || gameOver) return;

    bird.velocity += bird.gravity;
    bird.y += bird.velocity;

    if (bird.y + bird.height > canvas.height || bird.y < 0) {
        gameOver = true;
    }

    if (pipes.length === 0 || pipes[pipes.length - 1].x < 250) {
        createPipe();
    }

    pipes.forEach(pipe => {
        pipe.x -= 2;

        if (
            bird.x < pipe.x + pipe.width &&
            bird.x + bird.width > pipe.x &&
            (bird.y < pipe.top || bird.y + bird.height > canvas.height - pipe.bottom)
        ) {
            gameOver = true;
        }

        if (pipe.x + pipe.width === bird.x) {
            score++;
        }
    });

    pipes = pipes.filter(pipe => pipe.x + pipe.width > 0);
}

function drawBattery(x, y, width, height) {
    // Battery body (green - requested)
    ctx.fillStyle = "#2ecc71";
    ctx.fillRect(x, y, width, height);

    // Battery tip
    ctx.fillStyle = "#1e8449";
    ctx.fillRect(x + width / 4, y - 6, width / 2, 6);

    // White charge line (contrast friendly)
    ctx.fillStyle = "white";
    ctx.fillRect(x + 6, y + height / 2 - 4, width - 12, 8);
}

function drawRoundedBox(x, y, width, height, radius) {
    ctx.beginPath();
    ctx.roundRect(x, y, width, height, radius);
    ctx.fill();
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Background
    if (background.complete) {
        ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
    } else {
        ctx.fillStyle = "#87CEEB";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    // Pipes (dark gray for colorblind friendliness)
    ctx.fillStyle = "#444";
    pipes.forEach(pipe => {
        ctx.fillRect(pipe.x, 0, pipe.width, pipe.top);
        ctx.fillRect(pipe.x, canvas.height - pipe.bottom, pipe.width, pipe.bottom);
    });

    // Battery player
    drawBattery(bird.x, bird.y, bird.width, bird.height);

    // Score
    ctx.fillStyle = "white";
    ctx.font = "20px Arial";
    ctx.fillText("Score: " + score, 10, 30);

    // START SCREEN
    if (!gameStarted && !gameOver) {

        const boxWidth = 340;
        const boxHeight = 90;
        const boxX = canvas.width / 2 - boxWidth / 2;
        const boxY = canvas.height / 2 - boxHeight / 2;

        ctx.shadowColor = "rgba(0,0,0,0.3)";
        ctx.shadowBlur = 10;
        ctx.shadowOffsetY = 4;

        ctx.fillStyle = "#ADD8E6";
        drawRoundedBox(boxX, boxY, boxWidth, boxHeight, 15);

        ctx.shadowColor = "transparent";

        ctx.fillStyle = "#003366";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.font = "24px Arial";
        ctx.fillText("Press SPACE to Start", canvas.width / 2, canvas.height / 2);

        ctx.textAlign = "left";
        ctx.textBaseline = "alphabetic";
    }

    // GAME OVER SCREEN
    if (gameOver) {

        const boxWidth = 360;
        const boxHeight = 120;
        const boxX = canvas.width / 2 - boxWidth / 2;
        const boxY = canvas.height / 2 - boxHeight / 2;

        ctx.shadowColor = "rgba(0,0,0,0.3)";
        ctx.shadowBlur = 10;
        ctx.shadowOffsetY = 4;

        ctx.fillStyle = "#ADD8E6";
        drawRoundedBox(boxX, boxY, boxWidth, boxHeight, 15);

        ctx.shadowColor = "transparent";

        ctx.fillStyle = "#003366";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";

        ctx.font = "30px Arial";
        ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2 - 20);

        ctx.font = "20px Arial";
        ctx.fillText("Press SPACE to Restart", canvas.width / 2, canvas.height / 2 + 20);

        ctx.textAlign = "left";
        ctx.textBaseline = "alphabetic";
    }
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();

document.addEventListener("keydown", function(e) {
    if (e.code === "Space") {
        if (!gameStarted) {
            gameStarted = true;
        } else if (gameOver) {
            resetGame();
            gameStarted = true;
        } else {
            bird.velocity = bird.lift;
        }
    }
});
</script>

</body>
</html>

